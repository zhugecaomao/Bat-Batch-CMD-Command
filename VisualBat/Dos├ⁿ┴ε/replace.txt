Replace



用源目录中的同名文件替换目标目录中的文件。也可以使用 replace 将唯一的文件名添加到目标目录。


语法



replace [drive1:][path1] filename [drive2:][path2] [/a] [/p] [/r] [/w]


replace [drive1:][path1] filename [drive2:][path2] [/p] [/r] [/s] [/w] [/u]


参数



	[drive1:][path1] filename

	指定源文件或文件集的位置和名称。

	[drive2:][path2]

	指定目标文件的位置。不能为要替换的文件指定文件名。如果没有指定驱动器和目录，replace 将使用当前驱动器和目录作为目标。

	/a

	将新文件添加到目标目录中而不是替换现存的文件。不能将此命令行选项与 /s 或 /u 命令行选项共同使用。

	/p

	提示您在替换目标文件或添加源文件之前确认。

	/r

	替换只读文件和未受保护的文件。如果没有指定该命令行选项却尝试替换只读文件，就会发生错误并终止替换操作。

	/w

	replace 开始搜索源文件之前等待用户插入磁盘。如果没有指定 /w，按回车后，replace 立即开始替换或添加文件。

	/s

	搜索目标目录的所有子目录并替换匹配的文件。不能将 /s 命令行选项与 /a 命令行选项共同使用。replace 命令不搜索 path1 中指定的子目录。

	/u 

	只替换（更新）目标目录中比源目录中文件旧的文件。不能将/u 命令行选项与 /a 命令行选项共同使用。

	/?
在命令提示符显示帮助。



注释


 替换消息
	
 随着 replace 添加或替换文件，文件名会在屏幕上显示出来。replace 命令完成后，Windows 2000 以下列一种格式显示摘要行：

 nnn files added 
 nnn files replaced 

 no file added 
 no file replaced 
    
 替换软盘上的文件
	
如果正在使用软盘并要在 replace 操作期间更换磁盘，可以指定 /w 命令行选项，以便 replace 在必要时可以更换磁盘。
    
 替换的限制
	
 不能使用 replace 命令更新隐藏文件或系统文件。有关更改隐藏和系统属性的信息，请单击“”列表中的 attrib。
    
	 替换退出代码
	
 下表显示每个退出代码及其含义的简短描述： 


退出码
说明


0 
replace 命令成功替换或添加了文件。


1
replace 命令遇到了 MS-DOS 的错误版本。


2 
replace 命令找不到源文件。


3 
replace 命令找不到源或目标路径。


5 
用户没有访问要替换的文件。


8 
系统内存不足以执行该命令。


11 
用户在命令行上使用了错误的语法。




 可以在批处理程序的 if 命令行使用 errorlevel 参数来处理 replace 返回的退出代码。有关处理退出代码的批处理程序范例，请单击“”列表中的 if。
	




范例



 假定驱动器 C 上多个目录包含不同版本的名为 Phones.cli 的文件，该文件包含客户姓名和电话号码。要使用驱动器 A 的磁盘中最新版本的 Phones.cli 文件替换所有这些文件，请键入： 

 replace a:\phones.cli c:\ /s 

 要将新的打印机设备驱动程序添加到驱动器 C 上名为 Tools 的目录中，该目录已包含多个字处理程序的打印机设备驱动程序文件： 

 replace a:*.prd c:\tools /a 

 该命令搜索驱动器 A 上的当前路径，查找所有扩展名为 .prd 的文件，然后将这些文件添加到驱动器 C 的 Tools 目录中。因为包含 /a 命令行选项，所以 replace 只从驱动器 A 中添加驱动器 C 中不存在的文件。

XOX



