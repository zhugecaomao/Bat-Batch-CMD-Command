Defrag



定位并整理本地卷上的零碎根区文件、数据文件和文件夹。


语法



defrag volume

defrag volume [/a]

defrag volume [/a] [/v]

defrag volume [/v]

defrag volume [/f]


参数



volume

将被整理碎片的卷的驱动器号或装入点。

/a

分析卷并显示分析报告的摘要。

/v

显示完整的分析和碎片整理报告。

与 /a 组合使用时，只显示分析报告。单独使用时，则显示分析报告和碎片整理报告。

/f

强制对卷进行碎片整理，而不管该卷是否需要进行碎片整理。

/?
在命令提示符显示帮助。





注释


卷必须有至少 15% 的可用空间，defrag 才能完整和充分地整理它的磁盘碎片。Defrag 使用该空间作为文件碎片的排序区域。如果卷有少于 15% 的可用空间，则 defrag 只能部分地整理其碎片。要增加卷的可用空间，请删除不需要的文件或将其移至其他磁盘。
无法对文件系统已标志为作废（可能已经损坏）的卷进行碎片整理。进行碎片整理之前，必须对作废卷运行 chkdsk 命令。使用 fsutil dirty query 命令查看卷是否作废。有关 chkdsk 和 fsutil dirty 的详细信息，请参阅“”。
当 defrag 正在分析并整理卷的碎片时，将显示闪烁光标。当 defrag 完成分析并整理卷的碎片时，将显示分析报告、碎片整理报告、或两者的报告，然后返回命令提示符状态。
如果不指定参数 /a 或 /v，则在默认情况下，defrag 将综合显示分析报告和碎片整理报告。
通过键入 filename.txt，可以将报告发送到文本文件中。其中 filename.txt 是指定文件的名称。例如：

defrag volume /v filename.txt
要中断碎片整理进程，请在命令行处按 CTRL+C 键。
运行 defrag 命令和运行“磁盘碎片整理程序”相互排斥。如果您正在使用“磁盘碎片整理程序”来整理卷，并在命令行提示符处运行 defrag 命令，则 defrag 命令将会失败。相反，如果您运行 defrag 命令，并打开磁盘碎片整理程序，则磁盘碎片整理程序中的碎片整理选项不可用。


XOX




