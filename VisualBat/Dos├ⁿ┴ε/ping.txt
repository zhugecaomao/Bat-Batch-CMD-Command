Ping



通过发送“网际消息控制协议 (ICMP)”回响请求消息来验证与另一台 TCP/IP 计算机的 IP 级连接。回响应答消息的接收情况将和往返过程的次数一起显示出来。Ping 是用于检测网络连接性、可到达性和名称解析的疑难问题的主要 TCP/IP 命令。如果不带参数，ping 将显示帮助。


语法



ping [-t] [-a] [-n Count] [-l Size] [-f] [-i TTL] [-v TOS] [-r Count] [-s Count] [{-j HostList | -k HostList}] [-w Timeout] [TargetName]


参数



	-t

	指定在中断前 ping 可以持续发送回响请求信息到目的地。要中断并显示统计信息，请按 CTRL-BREAK。要中断并退出 ping，请按 CTRL-C。

	-a

	指定对目的地 IP 地址进行反向名称解析。如果解析成功，ping 将显示相应的主机名。

	-n Count

	指定发送回响请求消息的次数。默认值为 4。

	-lSize

	指定发送的回响请求消息中“数据”字段的长度（以字节表示）。默认值为 32。size 的最大值是 65,527。

	-f

	指定发送的回响请求消息带有“不要拆分”标志（所在的 IP 标题设为 1）。回响请求消息不能由目的地路径上的路由器进行拆分。该参数可用于检测并解决“路径最大传输单位 (PMTU)”的故障。

	-i TTL

	指定发送回响请求消息的 IP 标题中的 TTL 字段值。其默认值是是主机的默认 TTL 值。对于 Windows XP 主机，该值一般是 128。TTL 的最大值是 255。

	-v TOS

	指定发送回响请求消息的 IP 标题中的“服务类型 (TOS)”字段值。默认值是 0。TOS 被指定为 0 到 255 的十进制数。

	-r Count

	指定 IP 标题中的“记录路由”选项用于记录由回响请求消息和相应的回响应答消息使用的路径。路径中的每个跃点都使用“记录路由”选项中的一个值。如果可能，可以指定一个等于或大于来源和目的地之间跃点数的 Count。Count 的最小值必须为 1，最大值为 9。

	-s Count

	指定 IP 标题中的“Internet 时间戳”选项用于记录每个跃点的回响请求消息和相应的回响应答消息的到达时间。Count 的最小值必须为 1，最大值为 4。

	-jPath

	指定回响请求消息使用带有 HostList 指定的中间目的地集的 IP 标题中的“稀疏资源路由”选项。可以由一个或多个具有松散源路由的路由器分隔连续中间的目的地。主机列表中的地址或名称的最大数为 9，主机列表是一系列由空格分开的 IP 地址（带点的十进制符号）。

	-k HostList

	指定回响请求消息使用带有 HostList 指定的中间目的地集的 IP 标题中的“严格来源路由”选项。使用严格来源路由，下一个中间目的地必须是直接可达的（必须是路由器接口上的邻居）。主机列表中的地址或名称的最大数为 9，主机列表是一系列由空格分开的 IP 地址（带点的十进制符号）。

	-w Timeout

	指定等待回响应答消息响应的时间（以微妙计），该回响应答消息响应接收到的指定回响请求消息。如果在超时时间内未接收到回响应答消息，将会显示“请求超时”的错误消息。默认的超时时间为 4000（4 秒 ）。

	TargetName

	指定目的端，它既可以是 IP 地址，也可以是主机名。

	/?
在命令提示符显示帮助。



注释


 可以使用 ping 测试计算机名和计算机的 IP 地址。如果已成功验证 IP 地址但未成功验证计算机名，这可能是由于名称解析问题所致。在这种情况下，要确保指定的计算机名可以通过本地主机文件进行解析，其方法是通过域名系统 (DNS) 查询或 NetBIOS 名称解析技术进行解析。
    
 只有当网际协议 (TCP/IP) 协议在 网络连接中安装为网络适配器属性的组件时，该命令才可用。
    
    



范例



 以下范例显示 ping 的输出：

 C:\>ping example.microsoft.com

 Pinging example.microsoft.com [192.168.239.132] with 32 bytes of data:

 Reply from 192.168.239.132: bytes=32 time=101ms TTL=124

 Reply from 192.168.239.132: bytes=32 time=100ms TTL=124

 Reply from 192.168.239.132: bytes=32 time=120ms TTL=124

 Reply from 192.168.239.132: bytes=32 time=120ms TTL=124


要验证目的地 10.0.99.221 并解析 10.0.99.221 的主机名，请键入：

ping -a 10.0.99.221


要验证带有 10 个回响请求消息的 10.0.99.221，且每个消息的“数据”字段值为 1000 字节，请键入：

ping -n 10 -l 1000 10.0.99.221


要验证目的地 10.0.99.221 并记录 4 个跃点的路由，请键入：

ping -r 4 10.0.99.221


要验证目的地 10.0.99.221 并指定稀疏来源路由为 10.12.0.1-10.29.3.1-10.1.44.1，请键入：

ping -j 10.12.0.1 10.29.3.1 10.1.44.1 10.0.99.221


XOX


 
