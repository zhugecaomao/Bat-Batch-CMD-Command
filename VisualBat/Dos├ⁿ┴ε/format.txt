格式化



格式化指定卷中的磁盘以接受 Windows 文件。


语法



format volume [/fs:file-system] [/v:label] [/q] [/a:UnitSize] [/c] [/x]

format volume [/v:label] [/q] [/f:size]

format volume [/v:label] [/q] [/t:tracks /n:sectors]

format volume [/v:label] [/q]

format volume [/q]


参数



volume

指定要格式化的驱动器的装入点、卷名或驱动器号。如果不指定以下的任何命令行选项，format 将使用卷类型来决定磁盘的默认格式。

/fs:file-system

指定要使用的文件系统：FAT、FAT32 或 NTFS。软盘只能使用 FAT 文件系统。

/v:label

指定卷标。如果省略 /v 命令行选项或使用它而不指定卷标，format 将在格式化完成后提示输入卷标。使用语法 /v:来防止提示输入卷标。如果利用一个 format 命令格式化多个磁盘，则对所有磁盘指定相同的卷标。有关磁盘卷标的详细信息，请单击“”列表中的 Dir、Label 和 Vol。

/a:UnitSize

指定要在 FAT、FAT32 或 NTFS 卷上使用的分配单位大小。如果没有指定 UnitSize，将根据卷的大小进行选择。下表列出了 UnitSize 的有效值。


值
说明


512
每个簇 512 字节。


1024
每个簇 1024 字节。


2048
每个簇 2048 字节。


4096
每个簇 4096 字节。


8192
每个簇 8192 字节。


16K
每个簇 16K 字节。


32K
每个簇 32K 字节。


64K
每个簇 64K 字节。




/q

执行快速格式化。删除以前已格式化卷的文件表和根目录，但不在扇区之间扫描损坏区域。使用 /q 命令行选项应该仅格式化以前已格式化的完好的卷。

/f:size

指定要格式化的软盘大小。可能的话，使用此命令行选项取代 /t 和 /n 命令行选项。Windows 接受如下大小的值：

1440 或 1440k 或 1440kb 或 1.44 或 1.44m 或 1.44mb 
 1.44-MB、双面、四倍密度的 3.5 英寸磁盘。

/t:tracks

指定磁盘上的磁道数。请尽可能使用 /f 命令行选项来代替该命令行选项。如果使用 /t 命令行选项，必须同时使用 /n 命令行选项。这两个命令行项提供指定格式化磁盘大小的另一种方法。不能将 /f 命令行选项与 /t 命令行选项同时使用。

/n:sector

指定每个磁道上的扇区数。请尽可能使用 /f 命令行选项来代替该命令行选项。如果使用 /n 命令行选项，必须同时使用 /t 命令行选项。这两个命令行项提供指定格式化磁盘大小的另一种方法。不能将 /f 命令行选项与 /n 命令行选项同时使用。

/c

仅限于 NTFS。默认情况下，在新卷上创建的文件将被压缩。

/x

如果需要，在格式化之前卸除卷。对该卷任何打开的句柄不再有效。

/?
在命令提示符显示帮助。




注释


在“故障恢复控制台”使用 format。

format 命令可带有各种参数从“故障恢复控制台”使用。
管理特权

必须是 Administrators 组的成员才能格式化硬盘。
使用 format

Format 命令创建磁盘的新根目录和文件系统。也可以检查磁盘上的损坏区域，并且它可以删除磁盘上的所有数据。要能够使用新磁盘，必须首先用此命令格式化磁盘。
键入卷标

格式化软盘后，format 显示出下面的信息： 

Volume label (11 characters, ENTER for none)? 

卷标最多可以包含 11 个字符（包含空格）。如果不需要磁盘卷标，请按 ENTER。有关卷标的信息，请单击“”列表中的 label。
格式化硬盘

在使用 format 命令格式化硬盘时，format 在格式化硬盘之前显示下列格式的消息：

WARNING, ALL DATA ON nonremovable DISK 
 DRIVE x:WILL BE LOST!
 Proceed with Format (Y/N)?_ 

要格式化硬盘，请按 Y 键；如果不需要格式化硬盘，请按 N 键。您必须有管理员权限才能格式化硬盘。
单元大小

FAT 文件系统限制磁族数不得多于 65526。FAT32 文件系统将磁族数限制在 65527 到 4177917 之间。

对于大于 4096 的分配单元大小，不支持 NTFS 压缩方式。
Format消息。

在格式化完成后，Format 显示总磁盘空间、标记为错误的空间以及文件可用的空间的消息。
快速格式化

通过 /q 命令行选项可以加速格式化过程。只有在硬盘上没有坏的扇区时才能使用该命令行选项。
对重新分配的驱动器或网络驱动器使用 format

不应该在通过使用 subst 命令准备的驱动器上使用 format 命令。不能通过网络格式化磁盘。
Format 退出代码

下表列出每个退出代码及其含义的简短说明： 


退出码
说明


0 
格式操作成功。


1 
提供了不正确的参数。


4 
发生致命的错误（除 0、1 或 5 以外的任何错误）。


5 
用户按 N 键将响应提示“Proceed with Format (Y/N)?”以停止过程。



通过使用 errorlevel 条件和 if 批处理命令，可以检查这些退出代码。



范例



要使用默认大小格式化驱动器 A 中的新软盘，请键入：

format a:

要在驱动器 A 中对以前格式化过的磁盘执行快速格式化操作，请键入：

format a:/q

要格式化驱动器 A 中的软盘并指定其卷标为“DATA”，请键入以下命令：

format a:/v:DATA

XOX




